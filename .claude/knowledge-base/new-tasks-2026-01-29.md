# New Tasks - User Feedback Round 2
**Created**: 2026-01-30T01:30:00Z
**Source**: User screenshot analysis and feature requests

---

## ‚úÖ Completed (Immediate Fixes)

### Task #49: Fix missing Rename buttons ‚úÖ
**Status**: COMPLETED
**Priority**: CRITICAL
**Time**: 5 minutes

**Problem**: Rename buttons ("Preview Rename" and "Rename Now") were not visible after loading files.

**Root Cause**: Auto-load previews (Task #42) could fail and prevent `actions-section` from being shown.

**Fix**: Wrapped `loadAllPreviews()` in try-catch to ensure UI flow continues:
```javascript
try {
    await this.loadAllPreviews();
} catch (error) {
    console.error('Preview auto-load failed:', error);
    this.ui.warning('Preview generation failed. You can still rename files.');
}
```

**Result**: Buttons now always appear, even if preview generation fails.

---

### Task #50: Update footer branding ‚úÖ
**Status**: COMPLETED
**Priority**: LOW (Cosmetic)
**Time**: 1 minute

**Changed**:
```html
<!-- Old -->
<p>DJ MP3 Renamer v1.0.0 | Checkpoint 2: File Browser</p>

<!-- New -->
<p>Crate v2.0.0</p>
```

**Result**: Footer now reflects rebrand and removes internal dev terminology.

---

## üöß Pending Tasks

### Task #48: Add comprehensive sort options
**Status**: PENDING
**Priority**: HIGH
**Estimated Time**: 1-2 hours

**User Request**: "for 'Sort by:' what other options should we add? Created date? Modified date?"

**Research Findings** (Web Search 2026-01):
- **Windows Explorer**: Name, Date Modified, Type, Size (Details view standard)
- **macOS Finder**: Name, Date Modified, Date Created, Size, Kind
- **Downloads Folder Best Practice**: Date Modified (Newest First) by default
- **Best Practice**: Sortable column headers + dropdown for power users

**Sort Options to Implement**:

**Essential** (Match file manager standards):
1. ‚úÖ Name (A-Z) - Already implemented
2. ‚úÖ Name (Z-A) - Already implemented
3. **Date Modified (Newest First)** - NEW
4. **Date Modified (Oldest First)** - NEW
5. **Size (Largest First)** - NEW
6. **Size (Smallest First)** - NEW

**DJ-Specific** (Leverage metadata):
7. **BPM (Low to High)** - NEW
8. **BPM (High to Low)** - NEW
9. **Key (Alphabetical)** - NEW
10. **Track Number** - NEW (for albums)

**Implementation**:
- Add options to sort dropdown (directory browser AND main file list)
- Implement sort logic in `app.js` and `ui.js`
- Handle sorting before/after metadata loads
- Persist sort preference in localStorage

**Files to Modify**:
- `web/static/index.html` - Add dropdown options
- `web/static/js/app.js` - Main file list sorting
- `web/static/js/ui.js` - Directory browser sorting

**Dependencies**: None (standalone feature)

**Sources**:
- [Windows 11 File Explorer Sorting](https://www.elevenforum.com/t/change-folder-sort-by-view-in-windows-11-file-explorer.1249/)
- [macOS Finder Sorting Guide](https://support.apple.com/guide/mac-help/sort-and-arrange-items-in-the-finder-on-mac-mchlp1745/mac)
- [File Management Best Practices](https://www.xda-developers.com/organize-search-files-effectively-windows-explorer/)

---

### Task #51: Clickable column headers for sorting
**Status**: PENDING
**Priority**: MEDIUM
**Estimated Time**: 1 hour

**Problem**: Users must use dropdown to sort. Modern file managers allow clicking column headers.

**Desired Behavior**:
- Click "Current Filename" header ‚Üí Sort by name (ascending)
- Click again ‚Üí Sort by name (descending)
- Arrow indicator shows active sort column and direction
- Works for: Filename, Artist, Title, BPM, Key

**Benefits**:
- Faster sorting (one click vs dropdown navigation)
- Intuitive (matches OS file managers)
- Visual feedback (arrow shows current sort)

**Implementation**:
- Add click handlers to `th.sortable` elements
- Toggle sort direction on repeated clicks
- Update sort indicators (‚ñ≤ ascending, ‚ñº descending)
- Style hoverable headers with cursor: pointer

**Files to Modify**:
- `web/static/js/app.js` - Column click handlers
- `web/static/css/styles.css` - Hover styles, arrow indicators

**Dependencies**: Works with Task #48 (sort logic)

---

### Task #52: Select All checkbox in table header
**Status**: PENDING
**Priority**: MEDIUM
**Estimated Time**: 45 minutes

**Problem**: Must manually check each file. No "select all" functionality.

**Desired Behavior**:
- Checkbox in table header (checkbox column)
- Click header ‚Üí Select/deselect all files
- Indeterminate state when some files selected
- Keyboard shortcut: Ctrl/Cmd+A

**Visual States**:
- ‚òê Unchecked - No files selected
- ‚òë Checked - All files selected
- ‚äü Indeterminate - Some files selected

**Implementation**:
- Add checkbox to `<th class="col-checkbox">`
- Change event handler to select/deselect all
- Update individual checkbox handlers to update header state
- Add keyboard shortcut listener

**Files to Modify**:
- `web/static/index.html` - Add header checkbox
- `web/static/js/app.js` - Select all logic

**Dependencies**: None (standalone feature)

---

### Task #45: Add track number variable and option
**Status**: PENDING (from previous session)
**Priority**: MEDIUM

(Details in `./claude/active-tasks-2026-01-29.md`)

---

### Task #46: Verify all ID3 tag variables exposed
**Status**: PENDING (from previous session)
**Priority**: MEDIUM

(Details in `./claude/active-tasks-2026-01-29.md`)

---

### Task #47: Expand template presets with best practices
**Status**: PENDING (from previous session)
**Priority**: MEDIUM

(Details in `./claude/active-tasks-2026-01-29.md`)

---

## üìã Task Priority Order (Recommended)

### Immediate (Critical):
1. ‚úÖ Task #49 - Fix missing Rename buttons (DONE)
2. ‚úÖ Task #50 - Update footer branding (DONE)

### High Priority (User-Requested Features):
3. **Task #48** - Add comprehensive sort options (1-2 hours)
   - User explicitly requested this
   - File management is core workflow
   - Research completed with sources

4. **Task #51** - Clickable column headers (1 hour)
   - Natural complement to Task #48
   - Standard UX pattern users expect

### Medium Priority (UX Improvements):
5. **Task #52** - Select All checkbox (45 min)
   - Efficiency improvement
   - Standard file manager feature

6. **Task #46** - Verify all ID3 variables (1 hour)
   - Foundation for Tasks #45 and #47

7. **Task #45** - Track number support (1.5 hours)
   - Common use case for albums

8. **Task #47** - Expand presets (1 hour)
   - Final polish

**Total Estimated Time Remaining**: ~7-8 hours

---

## üîç Screenshot Analysis Summary

**Screenshot 1** (Browse Directories):
- ‚úÖ Browser modal working correctly
- ‚úÖ File checkboxes functioning (fixed in Task #43)
- ‚úÖ "Select Folder" button working
- ‚ö†Ô∏è Sort dropdown only has Name options ‚Üí **Task #48**

**Screenshot 2** (Main View - Files Loaded):
- ‚úÖ Files loaded with metadata
- ‚úÖ Preview column shows green new filenames (Task #42 working)
- ‚úÖ Checkboxes visible and functional
- ‚ùå Rename buttons missing ‚Üí **Task #49 FIXED**
- ‚ö†Ô∏è Footer shows old branding ‚Üí **Task #50 FIXED**

**Screenshot 3** (Scrolled View):
- ‚úÖ Preview shows "(no change: Already has desired name)" - good feedback
- ‚ùå Rename buttons still missing ‚Üí **Task #49 FIXED**
- ‚ö†Ô∏è Footer shows "DJ MP3 Renamer v1.0.0 | Checkpoint 2" ‚Üí **Task #50 FIXED**

---

## üí° Additional UX Observations

### What's Working Well:
1. ‚úÖ File selection checkboxes with visual feedback (blue highlight)
2. ‚úÖ Preview column with green badges for new names
3. ‚úÖ Clear "(no change: reason)" messaging for skipped files
4. ‚úÖ Progress bars during metadata/preview loading
5. ‚úÖ Breadcrumb navigation in directory browser
6. ‚úÖ File size display in directory browser

### Areas for Future Improvement:
1. **Bulk Actions Menu**: After selecting files, show quick actions (Rename Selected, Clear Selection, Export List)
2. **Filter Options**: Filter by BPM range, key, has/missing metadata
3. **Search Bar**: Quick search across loaded files
4. **Undo/Redo**: After rename, allow undo operation
5. **Rename Preview Diff**: Show character-by-character diff of old vs new name
6. **Drag Reorder**: Drag files to manually reorder before rename
7. **Export Filename List**: Copy/export list of new filenames

---

**Documentation Last Updated**: 2026-01-30T01:30:00Z
